<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>
    <base href="/admin/">
</head>
<body>
    <table border="1">
        <form action="updateProduct/" id="pdtdata" method="post">
            <% if(data){ %>
            <tr>
                <th>Product Id</th>
                <th>Product Name</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Category</th>
            </tr>
            <% } %>
            <% for(let i=0;i<data.length;i++){ %>
                <tr>
                    <td><input type="number" name="productId" class="pdtid" value="<%=data[i].productId%>"></td>
                    <td><input class="pdtname" name="productName" value="<%=data[i].productName%>"></td>
                    <td><input type="number" name="price" class="price" value="<%=data[i].price%>"></td>
                    <td><input type="number" class="stock" name="stockAvailable" value=<%=data[i].stockAvailable%>></td>
                    <td><input class="category" name="Category" value="<%=data[i].Category%>"></td>
                    <td><span class="edit" onclick="edit(this)">edit</span></td>
                    <td><span class="tick" onclick="readOnly()">tick</span></td>
                </tr>
            <% } %>  
        </form>          
    </table><br>

    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function(){
            disableAll();
        });
        function disableAll(){
            $(':input').attr('disabled','disabled');
        }
        function readOnly(){
            $(':input').attr('readonly','readonly');
            $("#pdtdata").submit();
        }
        function edit(elem){
            var r=elem.parentNode.parentNode;
            var inp=r.getElementsByTagName('input');
            for(let i=0;i<inp.length;i++){
                inp[i].removeAttribute("disabled");
                inp[i].removeAttribute("readonly");
            }
        }
    </script>
</body>
</html>